{"version":3,"sources":["index.js"],"names":["express","require","router","Router","Model_Arena","get","req","res","next","session","user","role","redirect","getFeatured","featuredArenas","render","title","arenas","console","error","module","exports"],"mappings":";;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb,C,CACA;;AACA,IAAMC,WAAW,GAAGH,OAAO,CAAC,uBAAD,CAA3B;AAEA;;;AACAC,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgB,iBAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,gBAGRF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,IAAoBJ,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBC,IAAjB,KAA0B,OAHtC;AAAA;AAAA;AAAA;;AAAA,2CAKHJ,GAAG,CAACK,QAAJ,CAAa,kBAAb,CALG;;AAAA;AAAA;AAAA,0CAUiBR,WAAW,CAACS,WAAZ,EAVjB;;AAAA;AAUNC,UAAAA,cAVM;AAYZP,UAAAA,GAAG,CAACQ,MAAJ,CAAW,OAAX,EAAoB;AAClBC,YAAAA,KAAK,EAAE,2BADW;AAElBC,YAAAA,MAAM,EAAEH,cAFU,CAEK;;AAFL,WAApB;AAZY;AAAA;;AAAA;AAAA;AAAA;AAkBZI,UAAAA,OAAO,CAACC,KAAR;AACAX,UAAAA,IAAI,aAAJ,CAnBY,CAmBD;;AAnBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;AAuBA;;AACAN,MAAM,CAACG,GAAP,CAAW,WAAX,EAAwB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC/CD,EAAAA,GAAG,CAACQ,MAAJ,CAAW,UAAX,EAAuB;AACrBC,IAAAA,KAAK,EAAE;AADc,GAAvB;AAGD,CAJD;AAMAI,MAAM,CAACC,OAAP,GAAiBnB,MAAjB","sourcesContent":["var express = require('express');\nvar router = express.Router();\n// Kita butuh Model_Arena untuk mengambil data \"Arena Populer\"\nconst Model_Arena = require('../models/Model_Arena');\n\n/* GET home page (index). */\nrouter.get('/', async function(req, res, next) {\n  try {\n    // 1. Cek dulu jika yang login adalah ADMIN\n    if (req.session.user && req.session.user.role === 'admin') {\n      // Jika Admin, lempar ke Dashboard-nya\n      return res.redirect('/admin/dashboard');\n    }\n\n    // 2. Jika GUEST atau PEMAIN, tampilkan Halaman Home\n    // Ambil 3 arena dengan foto untuk ditampilkan sebagai \"Rekomendasi\"\n    const featuredArenas = await Model_Arena.getFeatured();\n\n    res.render('index', {\n      title: 'Selamat Datang di ArenaGo',\n      arenas: featuredArenas // Kirim data arena ke EJS\n    });\n\n  } catch (err) {\n    console.error(err);\n    next(err); // Kirim error ke halaman error EJS\n  }\n});\n\n/* GET activity page. */\nrouter.get('/activity', function(req, res, next) {\n  res.render('activity', {\n    title: 'Activity - ArenaGo'\n  });\n});\n\nmodule.exports = router;"],"file":"index.dev.js"}