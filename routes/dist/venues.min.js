"use strict";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],a=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(t.push(l.value),!r||t.length!==r);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var express=require("express"),router=express.Router(),Model_Arena=require("../models/Model_Arena"),Model_Jadwal=require("../models/Model_Jadwal"),Model_FotoArena=require("../models/Model_FotoArena");router.get("/",function(r,t){var a,n,o,l,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={lokasi:r.query.lokasi||null,jenis:r.query.jenis||null},e.next=4,regeneratorRuntime.awrap(Promise.all([Model_Arena.getPublic(a),Model_Arena.getJenisOlahragaList()]));case 4:n=e.sent,o=_slicedToArray(n,2),l=o[0],i=o[1],t.render("venues/index",{title:"Cari Arena",data:l,jenisList:i,filter:a}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),r.flash("error_msg","Gagal memuat halaman arena."),t.redirect("/");case 16:case"end":return e.stop()}},null,null,[[0,11]])}),router.get("/detail/:id",function(r,t){var a,n,o,l,i,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.params.id,e.next=4,regeneratorRuntime.awrap(Promise.all([Model_Arena.getById(a),Model_Jadwal.getAvailableByArenaId(a),Model_FotoArena.getByArenaId(a)]));case 4:if(n=e.sent,o=_slicedToArray(n,3),l=o[0],i=o[1],s=o[2],0===l.length)return r.flash("error_msg","Arena tidak ditemukan."),e.abrupt("return",t.redirect("/venues"));e.next=12;break;case 12:t.render("venues/detail",{title:l[0].nama_arena,arena:l[0],jadwal:i,fotoList:s}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),r.flash("error_msg","Gagal memuat detail arena."),t.redirect("/venues");case 20:case"end":return e.stop()}},null,null,[[0,15]])}),module.exports=router;
//# sourceMappingURL=venues.min.js.map
