{"version":3,"sources":["index.js"],"names":["express","require","router","Router","Model_Arena","req","res","next","featuredArenas","regeneratorRuntime","async","_context","prev","session","user","role","abrupt","redirect","awrap","getFeatured","sent","render","title","arenas","t0","console","error","stop","module","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SAEfC,YAAcH,QAAQ,yBAA5BC,OAAME,IAAAA,IAAW,SAAWC,EAAAC,EAAAC,GAAX,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAJ,MAAA,KAAA,EAAA,GAAAI,EAAAC,KAAA,EAMTP,EAAIQ,QAAQC,MAAkC,UAA1BT,EAAIQ,QAAQC,KAAKC,KAN5B,OAAAJ,EAAAK,OAAA,SAGDV,EAAAW,SAAA,qBAHCN,EAAAJ,KAAA,EAAA,MAAA,KAAA,EAAA,OAAAI,EAAAJ,KAAA,EAAAE,mBAAAS,MAGDd,YAAAe,eAHC,KAAA,EAGDX,EAHCG,EAAAS,KAGDd,EAAAe,OAAA,QAGJR,CAHIS,MAAA,4BAAAC,OAAAf,IAHCG,EAAAJ,KAAA,GAAA,MAAA,KAAA,EAAAI,EAAAC,KAAA,EAAAD,EAAAa,GAAAb,EAAA,MAAA,GAqBbc,QAAQC,MAARf,EAAAa,IAlBYjB,EAAAI,EAAAa,IAHC,KAAA,GAAA,IAAA,MAAA,OAAAb,EAAAgB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAaPnB,OAAAA,IAAAA,YAVM,SAAAH,EAAAC,EAAAC,GAYZD,EAAAA,OAAG,WAAQ,CACTgB,MAAAA,yBAbUM,OAAAC,QAAA3B","file":"index.min.js","sourcesContent":["var express = require('express');\nvar router = express.Router();\n// Kita butuh Model_Arena untuk mengambil data \"Arena Populer\"\nconst Model_Arena = require('../models/Model_Arena');\n\n/* GET home page (index). */\nrouter.get('/', async function(req, res, next) {\n  try {\n    // 1. Cek dulu jika yang login adalah ADMIN\n    if (req.session.user && req.session.user.role === 'admin') {\n      // Jika Admin, lempar ke Dashboard-nya\n      return res.redirect('/admin/dashboard');\n    }\n\n    // 2. Jika GUEST atau PEMAIN, tampilkan Halaman Home\n    // Ambil 3 arena dengan foto untuk ditampilkan sebagai \"Rekomendasi\"\n    const featuredArenas = await Model_Arena.getFeatured();\n\n    res.render('index', {\n      title: 'Selamat Datang di ArenaGo',\n      arenas: featuredArenas // Kirim data arena ke EJS\n    });\n\n  } catch (err) {\n    console.error(err);\n    next(err); // Kirim error ke halaman error EJS\n  }\n});\n\n/* GET activity page. */\nrouter.get('/activity', function(req, res, next) {\n  res.render('activity', {\n    title: 'Activity - ArenaGo'\n  });\n});\n\nmodule.exports = router;"]}