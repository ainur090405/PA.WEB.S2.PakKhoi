<%- include('../../partials/_header', { title: title }) %>
<%- include('../../partials/_messages') %>
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2><i class="bi bi-calendar-week-fill"></i> <%= title %></h2>
  
  <div>
    <a href="/jadwal/create" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i> Tambah Manual
    </a>
    
    <a href="/jadwal/generator" class="btn btn-success">
      <i class="bi bi-magic me-2"></i> Generate Massal
    </a>
  </div>
</div>

<div class="card shadow-sm border-0">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>Arena</th>
            <th>Tanggal</th>
            <th>Jam Mulai</th>
            <th>Jam Selesai</th>
            <th>Status Slot</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach(j => { %>
            <tr>
              <td><%= j.nama_arena %></td>
              <td><%= new Date(j.tanggal).toLocaleDateString('id-ID') %></td>
              <td><%= j.jam_mulai.substring(0,5) %></td>
              <td><%= j.jam_selesai.substring(0,5) %></td>
              <td>
                <% if (j.status_slot === 'kosong') { %>
                  <span class="badge bg-success">Kosong</span>
                <% } else if (j.status_slot === 'terisi') { %>
                  <span class="badge bg-danger">Terisi</span>
                <% } else { %>
                  <span class="badge bg-secondary">Maintenance</span>
                <% } %>
              </td>
              <td>
                <a href="/jadwal/edit/<%= j.id_jadwal %>" class="btn btn-sm btn-outline-warning">
                  <i class="bi bi-pencil-fill"></i>
                </a>
                <a href="/jadwal/delete/<%= j.id_jadwal %>" class="btn btn-sm btn-outline-danger" 
                   onclick="return confirm('Yakin hapus jadwal ini?')">
                  <i class="bi bi-trash-fill"></i>
                </a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%- include('../../partials/_footer') %>