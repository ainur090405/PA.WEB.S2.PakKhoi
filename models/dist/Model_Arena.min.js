"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}var connection=require("../config/database"),Model_Arena=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getAll",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("\n        SELECT a.*, f.url_foto AS foto_cover \n        FROM arena a\n        LEFT JOIN foto_arena f ON a.id_foto_cover = f.id_foto\n        ORDER BY a.id_arena DESC\n      ",function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"getById",value:function(n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("\n        SELECT a.*, f.url_foto AS foto_cover\n        FROM arena a\n        LEFT JOIN foto_arena f ON a.id_foto_cover = f.id_foto\n        WHERE a.id_arena = ?\n      ",[n],function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"getPublic",value:function(a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){var e=[],n="\n        SELECT a.*, f.url_foto AS foto_cover \n        FROM arena a\n        LEFT JOIN foto_arena f ON a.id_foto_cover = f.id_foto\n        WHERE a.status = 'aktif'\n      ";a.lokasi&&(n+=" AND a.lokasi LIKE ?",e.push("%"+a.lokasi+"%")),a.jenis&&(n+=" AND a.jenis_olahraga = ?",e.push(a.jenis)),n+=" ORDER BY a.nama_arena ASC",connection.query(n,e,function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"getFeatured",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("\n        SELECT a.*, f.url_foto AS foto_cover\n        FROM arena a \n        LEFT JOIN foto_arena f ON a.id_foto_cover = f.id_foto\n        WHERE a.status = 'aktif' AND a.id_foto_cover IS NOT NULL\n        LIMIT 3\n      ",function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"getJenisOlahragaList",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("\n        SELECT DISTINCT jenis_olahraga \n        FROM arena \n        WHERE status = 'aktif' AND jenis_olahraga IS NOT NULL \n        ORDER BY jenis_olahraga ASC\n      ",function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"setCover",value:function(n,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("UPDATE arena SET id_foto_cover = ? WHERE id_arena = ?",[a,n],function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"Store",value:function(n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("INSERT INTO arena SET ?",n,function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"Update",value:function(n,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("UPDATE arena SET ? WHERE id_arena = ?",[a,n],function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}},{key:"Delete",value:function(n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(r,t){connection.query("DELETE FROM arena WHERE id_arena = ?",[n],function(e,n){e?t(e):r(n)})}));case 1:case"end":return e.stop()}})}}]),e}();module.exports=Model_Arena;
//# sourceMappingURL=Model_Arena.min.js.map
