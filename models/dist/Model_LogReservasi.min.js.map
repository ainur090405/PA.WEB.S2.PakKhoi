{"version":3,"sources":["Model_LogReservasi.js"],"names":["connection","require","Model_LogReservasi","id_reservasi","Promise","resolve","reject","query","err","rows","data","result","status_awal","status_baru","keterangan","waktu_perubahan","Date","module","exports"],"mappings":"mZAAA,IAAMA,WAAaC,QAAQ,sBAErBC,oIAKwBC,4GAPxBH,IAAUI,QAAGH,SAAOI,EAACC,GASrBN,WAAWO,MAAX,iHAKE,CAACJ,GACD,SAACK,EAAKC,GACAD,EAAKF,EAAOE,GACXH,EAAQI,0EASFC,4GACV,IAAIN,QAAQ,SAACC,EAASC,GAlB3BN,WAAAA,MAAAA,kCASGU,EAEJ,SAAAF,EAAAG,GAYSH,EAAKF,EAAOE,GACXH,EAAQM,gFASIR,EAAcS,EAAaC,8GAAaC,iCAAa,KACtEJ,EAAO,CACXP,aAAAA,EACAS,YAAAA,EACAC,YAAAA,EACAE,gBAAiB,IAAIC,KACrBF,WAAAA,qBApBAd,KAAAA,MAAAA,2DA4BNiB,OAAOC,QAAUhB","file":"Model_LogReservasi.min.js","sourcesContent":["const connection = require('../config/database');\r\n\r\nclass Model_LogReservasi {\r\n\r\n  // ===========================\r\n  // AMBIL SEMUA LOG PER RESERVASI\r\n  // ===========================\r\n  static async getByReservasi(id_reservasi) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query(\r\n        `SELECT *\r\n         FROM log_reservasi\r\n         WHERE id_reservasi = ?\r\n         ORDER BY waktu_perubahan DESC`,\r\n        [id_reservasi],\r\n        (err, rows) => {\r\n          if (err) reject(err);\r\n          else resolve(rows);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // ===========================\r\n  // TAMBAH LOG BARU\r\n  // ===========================\r\n  static async Store(data) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query(\r\n        `INSERT INTO log_reservasi SET ?`,\r\n        data,\r\n        (err, result) => {\r\n          if (err) reject(err);\r\n          else resolve(result);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // ===========================\r\n  // CATAT PERUBAHAN STATUS (PRAKTIS)\r\n  // ===========================\r\n  static async catatStatus(id_reservasi, status_awal, status_baru, keterangan = null) {\r\n    const data = {\r\n      id_reservasi,\r\n      status_awal,\r\n      status_baru,\r\n      waktu_perubahan: new Date(),\r\n      keterangan\r\n    };\r\n    \r\n    return this.Store(data);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Model_LogReservasi;\r\n"]}