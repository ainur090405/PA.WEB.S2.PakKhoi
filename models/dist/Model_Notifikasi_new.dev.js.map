{"version":3,"sources":["Model_Notifikasi_new.js"],"names":["connection","require","Model_Notifikasi","Data","Promise","resolve","reject","query","err","result","id_user","sql","rows","count","id_notifikasi","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,oBAAD,CAA1B;;IAEMC,gB;;;;;;;;;0BAEeC,I;;;;;+CACV,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,gBAAAA,UAAU,CAACO,KAAX,CAAiB,8BAAjB,EAAiDJ,IAAjD,EAAuD,UAACK,GAAD,EAAMC,MAAN,EAAiB;AACtE,sBAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACI,MAAD,CAAP;AACN,iBAHD;AAID,eALM,C;;;;;;;;;;;8BAQcC,O;;;;;gDACd,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,oBAAMK,GAAG,oFAAT;AACAX,gBAAAA,UAAU,CAACO,KAAX,CAAiBI,GAAjB,EAAsB,CAACD,OAAD,CAAtB,EAAiC,UAACF,GAAD,EAAMI,IAAN,EAAe;AAC9C,sBAAIJ,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACO,IAAD,CAAP;AACN,iBAHD;AAID,eANM,C;;;;;;;;;;;mCASmBF,O;;;;;gDACnB,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,oBAAMK,GAAG,8EAAT;AACAX,gBAAAA,UAAU,CAACO,KAAX,CAAiBI,GAAjB,EAAsB,CAACD,OAAD,CAAtB,EAAiC,UAACF,GAAD,EAAMI,IAAN,EAAe;AAC9C,sBAAIJ,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACO,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAT,CAAP;AACN,iBAHD;AAID,eANM,C;;;;;;;;;;;+BASeC,a;;;;;gDACf,IAAIV,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,gBAAAA,UAAU,CAACO,KAAX,CAAiB,0DAAjB,EAA6E,CAACO,aAAD,CAA7E,EAA8F,UAACN,GAAD,EAAMC,MAAN,EAAiB;AAC7G,sBAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACI,MAAD,CAAP;AACN,iBAHD;AAID,eALM,C;;;;;;;;;;;kCAQkBC,O;;;;;gDAClB,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,gBAAAA,UAAU,CAACO,KAAX,CAAiB,oDAAjB,EAAuE,CAACG,OAAD,CAAvE,EAAkF,UAACF,GAAD,EAAMC,MAAN,EAAiB;AACjG,sBAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACI,MAAD,CAAP;AACN,iBAHD;AAID,eALM,C;;;;;;;;;;;;;;AASXM,MAAM,CAACC,OAAP,GAAiBd,gBAAjB","sourcesContent":["const connection = require('../config/database');\r\n\r\nclass Model_Notifikasi {\r\n\r\n  static async Store(Data) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('INSERT INTO notifikasi SET ?', Data, (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async getByUser(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      const sql = `SELECT * FROM notifikasi WHERE id_user = ? ORDER BY id_notifikasi DESC LIMIT 10`;\r\n      connection.query(sql, [id_user], (err, rows) => {\r\n        if (err) reject(err);\r\n        else resolve(rows);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async getUnreadCount(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      const sql = `SELECT COUNT(*) as count FROM notifikasi WHERE id_user = ? AND dibaca = 0`;\r\n      connection.query(sql, [id_user], (err, rows) => {\r\n        if (err) reject(err);\r\n        else resolve(rows[0].count);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async markAsRead(id_notifikasi) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('UPDATE notifikasi SET dibaca = 1 WHERE id_notifikasi = ?', [id_notifikasi], (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async markAllAsRead(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('UPDATE notifikasi SET dibaca = 1 WHERE id_user = ?', [id_user], (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = Model_Notifikasi;\r\n"],"file":"Model_Notifikasi_new.dev.js"}