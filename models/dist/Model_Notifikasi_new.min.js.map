{"version":3,"sources":["Model_Notifikasi_new.js"],"names":["connection","require","Model_Notifikasi","Data","Promise","resolve","reject","query","err","result","id_user","rows","count","id_notifikasi","module","exports"],"mappings":"mZAAA,IAAMA,WAAaC,QAAQ,sBAErBC,yHAEeC,4GACV,IAAIC,QAAQ,SAACC,EAASC,GAC3BN,WAAWO,MAAM,+BAAgCJ,EAAM,SAACK,EAAKC,GACvDD,EAAKF,EAAOE,GAPlBR,EAAaC,8EAaMS,4GACd,IAAIN,QAAQ,SAACC,EAASC,GAE3BN,WAAWO,MADF,kFACa,CAACG,GAAU,SAACF,EAAKG,GACjCH,EAAKF,EAAOE,GACXH,EAAQM,mFAKSD,4GACnB,IAAIN,QAAQ,SAACC,EAASC,GAjBzBN,WAAAO,MADFP,4EACWM,CAAAA,GAAT,SAAAE,EACKH,GACNG,EAHDF,EAAAE,GAIDH,EAkBgBM,EAAK,GAAGC,mFAKHC,4GACf,IAAIT,QAAQ,SAACC,EAASC,GAC3BN,WAAWO,MAAM,2DAA4D,CAACM,GAAgB,SAACL,EAAKC,GAC9FD,EAAKF,EAAOE,GACXH,EAAQI,kFAKQC,4GAClB,IAAIN,QAAQ,SAACC,EAASC,GAC3BN,WAAWO,MAAM,qDA9BA,CAAAG,GAAqB,SAAAF,EAAAC,GACtCD,EAAAF,EAASE,GACTR,EAAAA,qDAoCNc,OAAOC,QAAUb","file":"Model_Notifikasi_new.min.js","sourcesContent":["const connection = require('../config/database');\r\n\r\nclass Model_Notifikasi {\r\n\r\n  static async Store(Data) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('INSERT INTO notifikasi SET ?', Data, (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async getByUser(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      const sql = `SELECT * FROM notifikasi WHERE id_user = ? ORDER BY id_notifikasi DESC LIMIT 10`;\r\n      connection.query(sql, [id_user], (err, rows) => {\r\n        if (err) reject(err);\r\n        else resolve(rows);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async getUnreadCount(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      const sql = `SELECT COUNT(*) as count FROM notifikasi WHERE id_user = ? AND dibaca = 0`;\r\n      connection.query(sql, [id_user], (err, rows) => {\r\n        if (err) reject(err);\r\n        else resolve(rows[0].count);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async markAsRead(id_notifikasi) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('UPDATE notifikasi SET dibaca = 1 WHERE id_notifikasi = ?', [id_notifikasi], (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  static async markAllAsRead(id_user) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query('UPDATE notifikasi SET dibaca = 1 WHERE id_user = ?', [id_user], (err, result) => {\r\n        if (err) reject(err);\r\n        else resolve(result);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = Model_Notifikasi;\r\n"]}