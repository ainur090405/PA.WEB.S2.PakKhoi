{"version":3,"sources":["Model_LogReservasi.js"],"names":["connection","require","Model_LogReservasi","id_reservasi","Promise","resolve","reject","query","err","rows","data","result","status_awal","status_baru","keterangan","waktu_perubahan","Date","Store","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,oBAAD,CAA1B;;IAEMC,kB;;;;;;;;;AAEJ;AACA;AACA;mCAC4BC,Y;;;;;+CACnB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,gBAAAA,UAAU,CAACO,KAAX,mHAKE,CAACJ,YAAD,CALF,EAME,UAACK,GAAD,EAAMC,IAAN,EAAe;AACb,sBAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACI,IAAD,CAAP;AACN,iBATH;AAWD,eAZM,C;;;;;;;;MAeT;AACA;AACA;;;;0BACmBC,I;;;;;gDACV,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,gBAAAA,UAAU,CAACO,KAAX,oCAEEG,IAFF,EAGE,UAACF,GAAD,EAAMG,MAAN,EAAiB;AACf,sBAAIH,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACM,MAAD,CAAP;AACN,iBANH;AAQD,eATM,C;;;;;;;;MAYT;AACA;AACA;;;;gCACyBR,Y,EAAcS,W,EAAaC,W;;;;;;;;AAAaC,cAAAA,U,8DAAa,I;AACtEJ,cAAAA,I,GAAO;AACXP,gBAAAA,YAAY,EAAZA,YADW;AAEXS,gBAAAA,WAAW,EAAXA,WAFW;AAGXC,gBAAAA,WAAW,EAAXA,WAHW;AAIXE,gBAAAA,eAAe,EAAE,IAAIC,IAAJ,EAJN;AAKXF,gBAAAA,UAAU,EAAVA;AALW,e;gDAQN,KAAKG,KAAL,CAAWP,IAAX,C;;;;;;;;;;;;;;AAKXQ,MAAM,CAACC,OAAP,GAAiBjB,kBAAjB","sourcesContent":["const connection = require('../config/database');\r\n\r\nclass Model_LogReservasi {\r\n\r\n  // ===========================\r\n  // AMBIL SEMUA LOG PER RESERVASI\r\n  // ===========================\r\n  static async getByReservasi(id_reservasi) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query(\r\n        `SELECT *\r\n         FROM log_reservasi\r\n         WHERE id_reservasi = ?\r\n         ORDER BY waktu_perubahan DESC`,\r\n        [id_reservasi],\r\n        (err, rows) => {\r\n          if (err) reject(err);\r\n          else resolve(rows);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // ===========================\r\n  // TAMBAH LOG BARU\r\n  // ===========================\r\n  static async Store(data) {\r\n    return new Promise((resolve, reject) => {\r\n      connection.query(\r\n        `INSERT INTO log_reservasi SET ?`,\r\n        data,\r\n        (err, result) => {\r\n          if (err) reject(err);\r\n          else resolve(result);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // ===========================\r\n  // CATAT PERUBAHAN STATUS (PRAKTIS)\r\n  // ===========================\r\n  static async catatStatus(id_reservasi, status_awal, status_baru, keterangan = null) {\r\n    const data = {\r\n      id_reservasi,\r\n      status_awal,\r\n      status_baru,\r\n      waktu_perubahan: new Date(),\r\n      keterangan\r\n    };\r\n    \r\n    return this.Store(data);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Model_LogReservasi;\r\n"],"file":"Model_LogReservasi.dev.js"}