{"version":3,"sources":["UserReservasiController.js"],"names":["Model_Reservasi","require","module","exports","index","req","res","id_user","session","user","getByUser","reservasi","render","title","data","console","error","flash","redirect","store","body","id_arena","id_jadwal","status","tanggal_pesan","Date","Store","message"],"mappings":";;AAAA;AACA,IAAMA,eAAe,GAAGC,OAAO,CAAC,2BAAD,CAA/B;;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACf;AACMC,EAAAA,KAFS,iBAEHC,GAFG,EAEEC,GAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAILC,YAAAA,OAJK,GAIKF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBF,OAJtB;AAAA;AAAA,4CAKaP,eAAe,CAACU,SAAhB,CAA0BH,OAA1B,CALb;;AAAA;AAKLI,YAAAA,SALK;AAOXL,YAAAA,GAAG,CAACM,MAAJ,CAAW,sBAAX,EAAmC;AACjCC,cAAAA,KAAK,EAAE,gBAD0B;AAEjCC,cAAAA,IAAI,EAAEH;AAF2B,aAAnC;AAPW;AAAA;;AAAA;AAAA;AAAA;AAYXI,YAAAA,OAAO,CAACC,KAAR;AACAX,YAAAA,GAAG,CAACY,KAAJ,CAAU,WAAV,EAAuB,8BAAvB;AACAX,YAAAA,GAAG,CAACY,QAAJ,CAAa,GAAb;;AAdW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBf;AACMC,EAAAA,KAnBS,iBAmBHd,GAnBG,EAmBEC,GAnBF;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAqBqBD,GAAG,CAACe,IArBzB,EAqBHC,QArBG,aAqBHA,QArBG,EAqBOC,SArBP,aAqBOA,SArBP;AAsBLR,YAAAA,IAtBK,GAsBE;AACXP,cAAAA,OAAO,EAAEF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBF,OADf;AAEXc,cAAAA,QAAQ,EAARA,QAFW;AAGXC,cAAAA,SAAS,EAATA,SAHW;AAIXC,cAAAA,MAAM,EAAE,UAJG;AAKXC,cAAAA,aAAa,EAAE,IAAIC,IAAJ;AALJ,aAtBF;AAAA;AAAA,4CA8BLzB,eAAe,CAAC0B,KAAhB,CAAsBZ,IAAtB,CA9BK;;AAAA;AA+BXT,YAAAA,GAAG,CAACY,KAAJ,CAAU,aAAV,EAAyB,uDAAzB;AACAX,YAAAA,GAAG,CAACY,QAAJ,CAAa,iBAAb;AAhCW;AAAA;;AAAA;AAAA;AAAA;AAkCXH,YAAAA,OAAO,CAACC,KAAR;AACAX,YAAAA,GAAG,CAACY,KAAJ,CAAU,WAAV,EAAuB,8BAA8B,aAAIU,OAAzD;AACArB,YAAAA,GAAG,CAACY,QAAJ,CAAa,MAAb;;AApCW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["// controllers/UserReservasiController.js\r\nconst Model_Reservasi = require('../models/Model_Reservasi');\r\n\r\nmodule.exports = {\r\n  // GET: tampilkan reservasi user login\r\n  async index(req, res) {\r\n    try {\r\n      const id_user = req.session.user.id_user;\r\n      const reservasi = await Model_Reservasi.getByUser(id_user);\r\n\r\n      res.render('user/reservasi/index', {\r\n        title: 'Reservasi Saya',\r\n        data: reservasi,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/');\r\n    }\r\n  },\r\n\r\n  // POST: simpan reservasi baru\r\n  async store(req, res) {\r\n    try {\r\n      const { id_arena, id_jadwal } = req.body;\r\n      const data = {\r\n        id_user: req.session.user.id_user,\r\n        id_arena,\r\n        id_jadwal,\r\n        status: 'menunggu',\r\n        tanggal_pesan: new Date(),\r\n      };\r\n\r\n      await Model_Reservasi.Store(data);\r\n      req.flash('success_msg', 'Reservasi berhasil dibuat! Menunggu konfirmasi admin.');\r\n      res.redirect('/user/reservasi');\r\n    } catch (err) {\r\n      console.error(err);\r\n      req.flash('error_msg', 'Gagal membuat reservasi: ' + err.message);\r\n      res.redirect('back');\r\n    }\r\n  },\r\n};\r\n"],"file":"UserReservasiController.dev.js"}