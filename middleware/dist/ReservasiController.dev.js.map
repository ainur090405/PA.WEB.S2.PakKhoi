{"version":3,"sources":["ReservasiController.js"],"names":["Model_Reservasi","require","ReservasiController","req","res","getAll","reservasi","render","title","data","console","error","flash","redirect","id","params","getById","reservasiData","length","body","status","catatan","dataToUpdate","Update","Delete","module","exports"],"mappings":";;;;;;;;AAAA;AACA,IAAMA,eAAe,GAAGC,OAAO,CAAC,2BAAD,CAA/B;;IAEMC,mB;;;;;;;;;AACJ;0BACmBC,G,EAAKC,G;;;;;;;;8CAEIJ,eAAe,CAACK,MAAhB,E;;;AAAlBC,cAAAA,S;AACNF,cAAAA,GAAG,CAACG,MAAJ,CAAW,uBAAX,EAAoC;AAClCC,gBAAAA,KAAK,EAAE,qBAD2B;AAElCC,gBAAAA,IAAI,EAAEH;AAF4B,eAApC;;;;;;;AAKAI,cAAAA,OAAO,CAACC,KAAR,CAAc,6BAAd;AACAR,cAAAA,GAAG,CAACS,KAAJ,CAAU,WAAV,EAAuB,8BAAvB;AACAR,cAAAA,GAAG,CAACS,QAAJ,CAAa,kBAAb;;;;;;;;MAIJ;;;;yBACkBV,G,EAAKC,G;;;;;;;AAEbU,cAAAA,E,GAAKX,GAAG,CAACY,MAAJ,CAAWD,E;;8CACMd,eAAe,CAACgB,OAAhB,CAAwBF,EAAxB,C;;;AAAtBG,cAAAA,a;;oBAEF,CAACA,aAAD,IAAkBA,aAAa,CAACC,MAAd,KAAyB,C;;;;;AAC7Cf,cAAAA,GAAG,CAACS,KAAJ,CAAU,WAAV,EAAuB,4BAAvB;gDACOR,GAAG,CAACS,QAAJ,CAAa,YAAb,C;;;AAGTT,cAAAA,GAAG,CAACG,MAAJ,CAAW,sBAAX,EAAmC;AACjCC,gBAAAA,KAAK,EAAE,yBAD0B;AAEjCF,gBAAAA,SAAS,EAAEW,aAAa,CAAC,CAAD;AAFS,eAAnC;;;;;;;AAKAP,cAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd;AACAR,cAAAA,GAAG,CAACS,KAAJ,CAAU,WAAV,EAAuB,8BAAvB;AACAR,cAAAA,GAAG,CAACS,QAAJ,CAAa,YAAb;;;;;;;;MAIJ;;;;2BACoBV,G,EAAKC,G;;;;;;;AACjBU,cAAAA,E,GAAKX,GAAG,CAACY,MAAJ,CAAWD,E;;0BAEQX,GAAG,CAACgB,I,EAAxBC,M,aAAAA,M,EAAQC,O,aAAAA,O;AACVC,cAAAA,Y,GAAe;AAAEF,gBAAAA,MAAM,EAANA,MAAF;AAAUC,gBAAAA,OAAO,EAAPA;AAAV,e;;8CACfrB,eAAe,CAACuB,MAAhB,CAAuBT,EAAvB,EAA2BQ,YAA3B,C;;;AAENnB,cAAAA,GAAG,CAACS,KAAJ,CAAU,aAAV,EAAyB,uCAAzB;AACAR,cAAAA,GAAG,CAACS,QAAJ,CAAa,YAAb;;;;;;;AAEAH,cAAAA,OAAO,CAACC,KAAR,CAAc,8BAAd;AACAR,cAAAA,GAAG,CAACS,KAAJ,CAAU,WAAV,EAAuB,8BAAvB;AACAR,cAAAA,GAAG,CAACS,QAAJ,2BAAgCC,EAAhC;;;;;;;;MAIJ;;;;4BACoBX,G,EAAKC,G;;;;;;;AAEfU,cAAAA,E,GAAKX,GAAG,CAACY,MAAJ,CAAWD,E;;8CAChBd,eAAe,CAACwB,MAAhB,CAAuBV,EAAvB,C;;;AAENX,cAAAA,GAAG,CAACS,KAAJ,CAAU,aAAV,EAAyB,kCAAzB;AACAR,cAAAA,GAAG,CAACS,QAAJ,CAAa,YAAb;;;;;;;AAEAH,cAAAA,OAAO,CAACC,KAAR,CAAc,8BAAd;AACAR,cAAAA,GAAG,CAACS,KAAJ,CAAU,WAAV,EAAuB,4BAAvB;AACAR,cAAAA,GAAG,CAACS,QAAJ,CAAa,YAAb;;;;;;;;;;;;;;AAKNY,MAAM,CAACC,OAAP,GAAiBxB,mBAAjB","sourcesContent":["// controllers/ReservasiController.js\r\nconst Model_Reservasi = require('../models/Model_Reservasi');\r\n\r\nclass ReservasiController {\r\n  // GET: daftar semua reservasi\r\n  static async index(req, res) {\r\n    try {\r\n      const reservasi = await Model_Reservasi.getAll();\r\n      res.render('admin/reservasi/index', {\r\n        title: 'Manajemen Reservasi',\r\n        data: reservasi,\r\n      });\r\n    } catch (err) {\r\n      console.error('[ReservasiController.index]', err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/admin/dashboard');\r\n    }\r\n  }\r\n\r\n  // GET: form edit\r\n  static async edit(req, res) {\r\n    try {\r\n      const id = req.params.id;\r\n      const reservasiData = await Model_Reservasi.getById(id);\r\n\r\n      if (!reservasiData || reservasiData.length === 0) {\r\n        req.flash('error_msg', 'Reservasi tidak ditemukan.');\r\n        return res.redirect('/reservasi');\r\n      }\r\n\r\n      res.render('admin/reservasi/edit', {\r\n        title: 'Update Status Reservasi',\r\n        reservasi: reservasiData[0],\r\n      });\r\n    } catch (err) {\r\n      console.error('[ReservasiController.edit]', err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/reservasi');\r\n    }\r\n  }\r\n\r\n  // POST: update status\r\n  static async update(req, res) {\r\n    const id = req.params.id;\r\n    try {\r\n      const { status, catatan } = req.body;\r\n      const dataToUpdate = { status, catatan };\r\n      await Model_Reservasi.Update(id, dataToUpdate);\r\n\r\n      req.flash('success_msg', 'Status reservasi berhasil diperbarui.');\r\n      res.redirect('/reservasi');\r\n    } catch (err) {\r\n      console.error('[ReservasiController.update]', err);\r\n      req.flash('error_msg', 'Gagal memperbarui reservasi.');\r\n      res.redirect(`/reservasi/edit/${id}`);\r\n    }\r\n  }\r\n\r\n  // GET: hapus reservasi\r\n  static async delete(req, res) {\r\n    try {\r\n      const id = req.params.id;\r\n      await Model_Reservasi.Delete(id);\r\n\r\n      req.flash('success_msg', 'Data reservasi berhasil dihapus.');\r\n      res.redirect('/reservasi');\r\n    } catch (err) {\r\n      console.error('[ReservasiController.delete]', err);\r\n      req.flash('error_msg', 'Gagal menghapus reservasi.');\r\n      res.redirect('/reservasi');\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = ReservasiController;\r\n"],"file":"ReservasiController.dev.js"}