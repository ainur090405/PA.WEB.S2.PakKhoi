"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,r,a){return r&&_defineProperties(e.prototype,r),a&&_defineProperties(e,a),e}var Model_Reservasi=require("../models/Model_Reservasi"),ReservasiController=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"index",value:function(r,a){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Model_Reservasi.getAll());case 3:s=e.sent,a.render("admin/reservasi/index",{title:"Manajemen Reservasi",data:s}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("[ReservasiController.index]",e.t0),r.flash("error_msg","Gagal memuat data reservasi."),a.redirect("/admin/dashboard");case 12:case"end":return e.stop()}},null,null,[[0,7]])}},{key:"edit",value:function(r,a){var s,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.params.id,e.next=4,regeneratorRuntime.awrap(Model_Reservasi.getById(s));case 4:if((t=e.sent)&&0!==t.length){e.next=8;break}return r.flash("error_msg","Reservasi tidak ditemukan."),e.abrupt("return",a.redirect("/reservasi"));case 8:a.render("admin/reservasi/edit",{title:"Update Status Reservasi",reservasi:t[0]}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("[ReservasiController.edit]",e.t0),r.flash("error_msg","Gagal memuat data reservasi."),a.redirect("/reservasi");case 16:case"end":return e.stop()}},null,null,[[0,11]])}},{key:"update",value:function(r,a){var s,t,n,i,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.params.id,e.prev=1,t=r.body,n=t.status,i=t.catatan,l={status:n,catatan:i},e.next=6,regeneratorRuntime.awrap(Model_Reservasi.Update(s,l));case 6:r.flash("success_msg","Status reservasi berhasil diperbarui."),a.redirect("/reservasi"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("[ReservasiController.update]",e.t0),r.flash("error_msg","Gagal memperbarui reservasi."),a.redirect("/reservasi/edit/".concat(s));case 15:case"end":return e.stop()}},null,null,[[1,10]])}},{key:"delete",value:function(r,a){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.params.id,e.next=4,regeneratorRuntime.awrap(Model_Reservasi.Delete(s));case 4:r.flash("success_msg","Data reservasi berhasil dihapus."),a.redirect("/reservasi"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("[ReservasiController.delete]",e.t0),r.flash("error_msg","Gagal menghapus reservasi."),a.redirect("/reservasi");case 13:case"end":return e.stop()}},null,null,[[0,8]])}}]),e}();module.exports=ReservasiController;
//# sourceMappingURL=ReservasiController.min.js.map
