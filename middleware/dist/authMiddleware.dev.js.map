{"version":3,"sources":["authMiddleware.js"],"names":["isAuthenticated","req","res","next","session","user","flash","redirect","isAdmin","role","isPemain","module","exports"],"mappings":";;AAAA;AACA,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1C,MAAIF,GAAG,CAACG,OAAJ,CAAYC,IAAhB,EAAsB;AACpB,WAAOF,IAAI,EAAX;AACD;;AACDF,EAAAA,GAAG,CAACK,KAAJ,CAAU,WAAV,EAAuB,+CAAvB;AACAJ,EAAAA,GAAG,CAACK,QAAJ,CAAa,aAAb;AACD,CAND,C,CAQA;;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACP,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClC,MAAIF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,IAAoBJ,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBI,IAAjB,KAA0B,OAAlD,EAA2D;AACzD,WAAON,IAAI,EAAX,CADyD,CAC1C;AAChB;;AACDF,EAAAA,GAAG,CAACK,KAAJ,CAAU,WAAV,EAAuB,0CAAvB;AACAJ,EAAAA,GAAG,CAACK,QAAJ,CAAa,mBAAb,EALkC,CAKC;AACpC,CAND,C,CAQA;;;AACA,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACT,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnC,MAAIF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,IAAoBJ,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBI,IAAjB,KAA0B,QAAlD,EAA4D;AAC1D,WAAON,IAAI,EAAX,CAD0D,CAC3C;AAChB;;AACDF,EAAAA,GAAG,CAACK,KAAJ,CAAU,WAAV,EAAuB,2CAAvB;AACAJ,EAAAA,GAAG,CAACK,QAAJ,CAAa,kBAAb;AACD,CAND;;AAQAI,MAAM,CAACC,OAAP,GAAiB;AACfZ,EAAAA,eAAe,EAAfA,eADe;AAEfQ,EAAAA,OAAO,EAAPA,OAFe;AAGfE,EAAAA,QAAQ,EAARA;AAHe,CAAjB","sourcesContent":["// Cek apakah user sudah login\r\nconst isAuthenticated = (req, res, next) => {\r\n  if (req.session.user) {\r\n    return next(); \r\n  }\r\n  req.flash('error_msg', 'Anda harus login untuk mengakses halaman ini.');\r\n  res.redirect('/auth/login');\r\n};\r\n\r\n// Cek role Admin\r\nconst isAdmin = (req, res, next) => {\r\n  if (req.session.user && req.session.user.role === 'admin') {\r\n    return next(); // Lanjut jika rolenya 'admin'\r\n  }\r\n  req.flash('error_msg', 'Akses ditolak. Halaman ini khusus Admin.');\r\n  res.redirect('/pemain/dashboard'); // Redirect pemain ke dashboardnya\r\n};\r\n\r\n// Cek role Pemain\r\nconst isPemain = (req, res, next) => {\r\n  if (req.session.user && req.session.user.role === 'pemain') {\r\n    return next(); // Lanjut jika rolenya 'pemain'\r\n  }\r\n  req.flash('error_msg', 'Akses ditolak. Halaman ini khusus Pemain.');\r\n  res.redirect('/admin/dashboard'); \r\n};\r\n\r\nmodule.exports = {\r\n  isAuthenticated,\r\n  isAdmin,\r\n  isPemain\r\n};"],"file":"authMiddleware.dev.js"}