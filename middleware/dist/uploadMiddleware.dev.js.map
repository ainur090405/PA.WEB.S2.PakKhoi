{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","storage","diskStorage","destination","req","file","cb","filename","uniqueSuffix","Date","now","Math","round","random","extname","originalname","fileFilter","mimetype","Error","upload","limits","fileSize","module","exports"],"mappings":";;AAAA;AACA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CAEA;;;AACA,IAAME,OAAO,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACjCC,EAAAA,WAAW,EAAE,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACpCA,IAAAA,EAAE,CAAC,IAAD,EAAO,uBAAP,CAAF;AACD,GAHgC;AAIjCC,EAAAA,QAAQ,EAAE,kBAAUH,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjC,QAAME,YAAY,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAxC;AACAP,IAAAA,EAAE,CAAC,IAAD,EAAO,WAAWE,YAAX,GAA0BR,IAAI,CAACc,OAAL,CAAaT,IAAI,CAACU,YAAlB,CAAjC,CAAF;AACD;AAPgC,CAAnB,CAAhB,C,CAUA;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACZ,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AACpC,MAAID,IAAI,CAACY,QAAL,KAAkB,YAAlB,IAAkCZ,IAAI,CAACY,QAAL,KAAkB,WAApD,IAAmEZ,IAAI,CAACY,QAAL,KAAkB,WAAzF,EAAsG;AACpGX,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF,CADoG,CACpF;AACjB,GAFD,MAEO;AACLA,IAAAA,EAAE,CAAC,IAAIY,KAAJ,CAAU,gDAAV,CAAD,EAA8D,KAA9D,CAAF,CADK,CACmE;AACzE;AACF,CAND,C,CAQA;;;AACA,IAAMC,MAAM,GAAGrB,MAAM,CAAC;AACpBG,EAAAA,OAAO,EAAEA,OADW;AAEpBe,EAAAA,UAAU,EAAEA,UAFQ;AAGpBI,EAAAA,MAAM,EAAE;AACNC,IAAAA,QAAQ,EAAE,OAAO,IAAP,GAAc,CADlB,CACoB;;AADpB;AAHY,CAAD,CAArB,C,CAQA;;AACAC,MAAM,CAACC,OAAP,GAAiBJ,MAAjB","sourcesContent":["// middleware/uploadMiddleware.js\r\nconst multer = require('multer');\r\nconst path = require('path');\r\n\r\n// 1. Tentukan lokasi penyimpanan DULU\r\nconst storage = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, 'public/uploads/arena/');\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'arena-' + uniqueSuffix + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// 2. Tentukan filter file KEMUDIAN\r\nconst fileFilter = (req, file, cb) => {\r\n  if (file.mimetype === 'image/jpeg' || file.mimetype === 'image/png' || file.mimetype === 'image/jpg') {\r\n    cb(null, true); // Terima file\r\n  } else {\r\n    cb(new Error('Hanya file JPEG, JPG, atau PNG yang diizinkan!'), false); // Tolak file\r\n  }\r\n};\r\n\r\n// 3. BARU buat konfigurasi upload utama\r\nconst upload = multer({\r\n  storage: storage,\r\n  fileFilter: fileFilter,\r\n  limits: {\r\n    fileSize: 1024 * 1024 * 5 // Batas 5MB\r\n  }\r\n});\r\n\r\n// 4. Terakhir, export\r\nmodule.exports = upload;"],"file":"uploadMiddleware.dev.js"}