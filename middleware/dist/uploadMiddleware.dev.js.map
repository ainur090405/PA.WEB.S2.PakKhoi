{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","storageArena","diskStorage","destination","req","file","cb","join","__dirname","filename","unique","Date","now","Math","round","random","extname","originalname","storageBukti","fileFilter","mimetype","Error","uploadArena","storage","limits","fileSize","uploadBuktiPembayaran","module","exports"],"mappings":";;AAAA;AACA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CAEA;AACA;AACA;;;AACA,IAAME,YAAY,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACtCC,EAAAA,WAAW,EAAE,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACpCA,IAAAA,EAAE,CAAC,IAAD,EAAON,IAAI,CAACO,IAAL,CAAUC,SAAV,EAAqB,0BAArB,CAAP,CAAF;AACD,GAHqC;AAItCC,EAAAA,QAAQ,EAAE,kBAAUL,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjC,QAAMI,MAAM,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAlC;AACAT,IAAAA,EAAE,CAAC,IAAD,EAAO,WAAWI,MAAX,GAAoBV,IAAI,CAACgB,OAAL,CAAaX,IAAI,CAACY,YAAlB,CAA3B,CAAF;AACD;AAPqC,CAAnB,CAArB,C,CAUA;AACA;AACA;;AACA,IAAMC,YAAY,GAAGpB,MAAM,CAACI,WAAP,CAAmB;AACtCC,EAAAA,WAAW,EAAE,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACpCA,IAAAA,EAAE,CAAC,IAAD,EAAON,IAAI,CAACO,IAAL,CAAUC,SAAV,EAAqB,qCAArB,CAAP,CAAF;AACD,GAHqC;AAItCC,EAAAA,QAAQ,EAAE,kBAAUL,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjC,QAAMI,MAAM,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAlC;AACAT,IAAAA,EAAE,CAAC,IAAD,EAAO,WAAWI,MAAX,GAAoBV,IAAI,CAACgB,OAAL,CAAaX,IAAI,CAACY,YAAlB,CAA3B,CAAF;AACD;AAPqC,CAAnB,CAArB,C,CAUA;AACA;AACA;;AACA,IAAME,UAAU,GAAG,SAAbA,UAAa,CAACf,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AACpC,MACED,IAAI,CAACe,QAAL,KAAkB,YAAlB,IACAf,IAAI,CAACe,QAAL,KAAkB,WADlB,IAEAf,IAAI,CAACe,QAAL,KAAkB,WAHpB,EAIE;AACAd,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACD,GAND,MAMO;AACLA,IAAAA,EAAE,CAAC,IAAIe,KAAJ,CAAU,2CAAV,CAAD,EAAyD,KAAzD,CAAF;AACD;AACF,CAVD,C,CAYA;AACA;AACA;;;AACA,IAAMC,WAAW,GAAGxB,MAAM,CAAC;AACzByB,EAAAA,OAAO,EAAEtB,YADgB;AAEzBkB,EAAAA,UAAU,EAAVA,UAFyB;AAGzBK,EAAAA,MAAM,EAAE;AAAEC,IAAAA,QAAQ,EAAE,OAAO,IAAP,GAAc;AAA1B;AAHiB,CAAD,CAA1B,C,CAMA;AACA;AACA;;AACA,IAAMC,qBAAqB,GAAG5B,MAAM,CAAC;AACnCyB,EAAAA,OAAO,EAAEL,YAD0B;AAEnCC,EAAAA,UAAU,EAAVA,UAFmC;AAGnCK,EAAAA,MAAM,EAAE;AAAEC,IAAAA,QAAQ,EAAE,OAAO,IAAP,GAAc;AAA1B;AAH2B,CAAD,CAApC,C,CAMA;;AACAE,MAAM,CAACC,OAAP,GAAiB;AACfN,EAAAA,WAAW,EAAXA,WADe;AAEfI,EAAAA,qBAAqB,EAArBA;AAFe,CAAjB","sourcesContent":["// middleware/uploadMiddleware.js\r\nconst multer = require('multer');\r\nconst path = require('path');\r\n\r\n// ==============================\r\n// STORAGE UNTUK FOTO ARENA\r\n// ==============================\r\nconst storageArena = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, path.join(__dirname, '../public/uploads/arena/'));\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const unique = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'arena-' + unique + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// ==============================\r\n// STORAGE UNTUK BUKTI PEMBAYARAN\r\n// ==============================\r\nconst storageBukti = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, path.join(__dirname, '../public/uploads/bukti_pembayaran/'));\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const unique = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'bukti_' + unique + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// ==============================\r\n// FILTER FILE GAMBAR\r\n// ==============================\r\nconst fileFilter = (req, file, cb) => {\r\n  if (\r\n    file.mimetype === 'image/jpeg' ||\r\n    file.mimetype === 'image/png' ||\r\n    file.mimetype === 'image/jpg'\r\n  ) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error('Hanya file JPG, JPEG, PNG yang diizinkan!'), false);\r\n  }\r\n};\r\n\r\n// ==============================\r\n// MIDDLEWARE UPLOAD ARENA\r\n// ==============================\r\nconst uploadArena = multer({\r\n  storage: storageArena,\r\n  fileFilter,\r\n  limits: { fileSize: 1024 * 1024 * 5 }\r\n});\r\n\r\n// ==============================\r\n// MIDDLEWARE UPLOAD BUKTI PEMBAYARAN\r\n// ==============================\r\nconst uploadBuktiPembayaran = multer({\r\n  storage: storageBukti,\r\n  fileFilter,\r\n  limits: { fileSize: 1024 * 1024 * 5 }\r\n});\r\n\r\n// EXPORT\r\nmodule.exports = {\r\n  uploadArena,\r\n  uploadBuktiPembayaran\r\n};\r\n"],"file":"uploadMiddleware.dev.js"}