{"version":3,"sources":["UserReservasiController.js"],"names":["Model_Reservasi","require","module","exports","req","res","id_user","user","getByUser","reservasi","render","title","data","console","error","_context","t0","flash","redirect","body","id_arena","id_jadwal","session","status","Date","Store","_context2","message"],"mappings":"aACA,IAAMA,gBAAkBC,QAAQ,6BAAhCC,OAAMF,QAAAA,CAECG,MAFDH,SAENI,EAAiBC,GAFXL,IAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAEWM,EAAAF,EAEHA,QAFGG,KAAAD,QAFXN,EAAAA,KAAAA,EAAAA,mBAAAA,MAEWA,gBAAAQ,UAAAF,IAFXN,KAAAA,EAEWS,EAFXT,EAAAA,KAEWK,EAAAK,OAAA,uBAAA,CAAAC,MAAA,iBAAAC,KAAAH,IAFXT,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAEWa,QAAAC,MAAAC,EAAAC,IAAAZ,EAAAa,MAAA,YAAA,gCAcXZ,EAAIa,SAAS,KAhBblB,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,MAWEY,MAXFZ,SAWEY,EAAIP,GAXNL,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAAAA,EAEWI,EAAAe,KAAAC,EAFXpB,EAEWoB,SAAAC,EAFXrB,EAEWqB,UAAAT,EAAA,CAuBTN,QAASF,EAAIkB,QAAQf,KAAKD,QAvBjBc,SAAAA,EAAAC,UAAAA,EAAAE,OAAA,WAYXV,cAAQC,IAARU,MAdAxB,EAAAA,KAAAA,EAAAA,mBAAAA,MAgCMA,gBAAgByB,MAAMb,IAhC5BZ,KAAAA,EAEWI,EAAAa,MAAA,cAAA,yDAAAZ,EAAAa,SAAA,mBAFXlB,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAEWa,QAAAC,MAAAY,EAAAV,IAAAZ,EAAAa,MAAA,YAAA,4BAAAS,EAAAV,GAAAW,SAAAtB,EAAAa,SAAA,QAFXlB,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA","file":"UserReservasiController.min.js","sourcesContent":["// controllers/UserReservasiController.js\r\nconst Model_Reservasi = require('../models/Model_Reservasi');\r\n\r\nmodule.exports = {\r\n  // GET: tampilkan reservasi user login\r\n  async index(req, res) {\r\n    try {\r\n      const id_user = req.session.user.id_user;\r\n      const reservasi = await Model_Reservasi.getByUser(id_user);\r\n\r\n      res.render('user/reservasi/index', {\r\n        title: 'Reservasi Saya',\r\n        data: reservasi,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/');\r\n    }\r\n  },\r\n\r\n  // POST: simpan reservasi baru\r\n  async store(req, res) {\r\n    try {\r\n      const { id_arena, id_jadwal } = req.body;\r\n      const data = {\r\n        id_user: req.session.user.id_user,\r\n        id_arena,\r\n        id_jadwal,\r\n        status: 'menunggu',\r\n        tanggal_pesan: new Date(),\r\n      };\r\n\r\n      await Model_Reservasi.Store(data);\r\n      req.flash('success_msg', 'Reservasi berhasil dibuat! Menunggu konfirmasi admin.');\r\n      res.redirect('/user/reservasi');\r\n    } catch (err) {\r\n      console.error(err);\r\n      req.flash('error_msg', 'Gagal membuat reservasi: ' + err.message);\r\n      res.redirect('back');\r\n    }\r\n  },\r\n};\r\n"]}