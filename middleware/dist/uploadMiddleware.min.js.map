{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","diskStorage","destination","req","file","cb","Date","now","Math","round","random","extname","originalname","fileFilter","mimetype","Error","upload","storage","module","exports"],"mappings":"aACA,IAAMA,OAASC,QAAQ,UADvBC,KAAAD,QAAA,QAEMC,QAAOD,OAAQE,YAErB,CAEEC,YAAa,SAAUC,EAAKC,EAAMC,GAChCA,EAAG,KAAM,0BADXH,SAAAA,SAAaC,EAAAC,EAAAC,GADoBA,EAAA,KAAA,UAEtBC,KAAAC,MAAT,IAAAC,KAAAC,MAAA,IAAAD,KAAAE,WAF+BV,KAAAW,QAAAP,EAAAQ,kBAUnCC,WAAA,SAAAV,EAAAC,EAAAC,GAEwB,eAAlBD,EAAKU,UAA+C,cAAlBV,EAAKU,UAA8C,cAAlBV,EAAKU,SADxED,EAAAA,MAAAA,GAEFR,EAAG,IAADU,MAAA,mDAAc,IAOdC,OAASlB,OAAO,CACpBmB,QAASA,QADXJ,WAAef,WACbmB,OAAO,CACPJ,SAAYA,WAFQK,OAQtBC,QAAAH","file":"uploadMiddleware.min.js","sourcesContent":["// middleware/uploadMiddleware.js\r\nconst multer = require('multer');\r\nconst path = require('path');\r\n\r\n// 1. Tentukan lokasi penyimpanan DULU\r\nconst storage = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, 'public/uploads/arena/');\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'arena-' + uniqueSuffix + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// 2. Tentukan filter file KEMUDIAN\r\nconst fileFilter = (req, file, cb) => {\r\n  if (file.mimetype === 'image/jpeg' || file.mimetype === 'image/png' || file.mimetype === 'image/jpg') {\r\n    cb(null, true); // Terima file\r\n  } else {\r\n    cb(new Error('Hanya file JPEG, JPG, atau PNG yang diizinkan!'), false); // Tolak file\r\n  }\r\n};\r\n\r\n// 3. BARU buat konfigurasi upload utama\r\nconst upload = multer({\r\n  storage: storage,\r\n  fileFilter: fileFilter,\r\n  limits: {\r\n    fileSize: 1024 * 1024 * 5 // Batas 5MB\r\n  }\r\n});\r\n\r\n// 4. Terakhir, export\r\nmodule.exports = upload;"]}