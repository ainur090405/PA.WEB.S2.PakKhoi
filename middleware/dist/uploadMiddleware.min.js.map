{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","storageArena","diskStorage","destination","req","file","cb","join","__dirname","Math","round","random","extname","originalname","storageBukti","filename","Date","now","fileFilter","mimetype","Error","limits","fileSize","uploadArena","uploadBuktiPembayaran"],"mappings":"aACA,IAAMA,OAASC,QAAQ,UADvBC,KAAAD,QAAA,QAMAE,aAAAH,OAAAI,YAAA,CAEEC,YAAa,SAAUC,EAAKC,EAAMC,GAChCA,EAAG,KAAMN,KAAKO,KAAKC,UAAW,8BADhCL,SAAAA,SAAaC,EAAAC,EAAAC,GADyBA,EAAA,KAAA,UAEtBC,KAAKC,MAAV,IAAqBC,KAAAC,MAA9B,IAA8BD,KAAAE,WAFMX,KAAAY,QAAAP,EAAAQ,kBAYxCC,aAAAhB,OAAAI,YAAA,CAEEC,YAAa,SAAUC,EAAKC,EAAMC,GAD9BQ,EAAAA,KAAAA,KAAYP,KAAGT,UAAOI,yCAExBI,SAAE,SAAOF,EAAUI,EAAVF,GAEXS,EAAAA,KAAU,UAJ4BC,KAAAC,MAAA,IAAAR,KAAAC,MAAA,IAAAD,KAAAE,WAI5BX,KAAeK,QAAUA,EAAAQ,kBAS/BK,WAAa,SAACd,EAAKC,EAAMC,GAE3B,eADFD,EACEA,UAIA,cAAAC,EAAGa,UACE,cANPd,EAMOc,SAENb,EAAA,MAAA,GAIHA,EAAA,IAAAc,MAAA,8CAAA,IAKEC,YAAQvB,OAAA,CAAEwB,QAAAA,aAAFJ,WAAAA,WAHVG,OAMA,CAAAC,SAAA,WAKEJ,sBAFmCpB,OAAA,CAGnCuB,QAAQP,aAAEQ,WAAAA,WAAFD,OAAA,CAAAC,SAAA,WAKRC,OAAAA,QAAAA,CACAC,YAAAA,YAFFA,sBAAAA","file":"uploadMiddleware.min.js","sourcesContent":["// middleware/uploadMiddleware.js\r\nconst multer = require('multer');\r\nconst path = require('path');\r\n\r\n// ==============================\r\n// STORAGE UNTUK FOTO ARENA\r\n// ==============================\r\nconst storageArena = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, path.join(__dirname, '../public/uploads/arena/'));\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const unique = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'arena-' + unique + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// ==============================\r\n// STORAGE UNTUK BUKTI PEMBAYARAN\r\n// ==============================\r\nconst storageBukti = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, path.join(__dirname, '../public/uploads/bukti_pembayaran/'));\r\n  },\r\n  filename: function (req, file, cb) {\r\n    const unique = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, 'bukti_' + unique + path.extname(file.originalname));\r\n  }\r\n});\r\n\r\n// ==============================\r\n// FILTER FILE GAMBAR\r\n// ==============================\r\nconst fileFilter = (req, file, cb) => {\r\n  if (\r\n    file.mimetype === 'image/jpeg' ||\r\n    file.mimetype === 'image/png' ||\r\n    file.mimetype === 'image/jpg'\r\n  ) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error('Hanya file JPG, JPEG, PNG yang diizinkan!'), false);\r\n  }\r\n};\r\n\r\n// ==============================\r\n// MIDDLEWARE UPLOAD ARENA\r\n// ==============================\r\nconst uploadArena = multer({\r\n  storage: storageArena,\r\n  fileFilter,\r\n  limits: { fileSize: 1024 * 1024 * 5 }\r\n});\r\n\r\n// ==============================\r\n// MIDDLEWARE UPLOAD BUKTI PEMBAYARAN\r\n// ==============================\r\nconst uploadBuktiPembayaran = multer({\r\n  storage: storageBukti,\r\n  fileFilter,\r\n  limits: { fileSize: 1024 * 1024 * 5 }\r\n});\r\n\r\n// EXPORT\r\nmodule.exports = {\r\n  uploadArena,\r\n  uploadBuktiPembayaran\r\n};\r\n"]}