{"version":3,"sources":["ReservasiController.js"],"names":["Model_Reservasi","require","ReservasiController","req","res","getAll","reservasi","render","data","console","error","_context","t0","flash","redirect","id","params","getById","reservasiData","length","title","body","dataToUpdate","status","catatan","Update","_context3","concat","Delete","_context4","module","exports"],"mappings":"mZACA,IAAMA,gBAAkBC,QAAQ,6BAE1BC,4HAEeC,EAAKC,2IAEIJ,gBAAgBK,iBAAlCC,SAPZF,EAAAG,OAAA,wBAAA,CACMP,MAAAA,sBASEQ,KAAMF,oDAGRG,QAAQC,MAAM,8BAAdC,EAAAC,IACAT,EAAIU,MAAM,YAAa,gCACvBT,EAAIU,SAAS,wGAXjBX,EAAAC,2GAkBUW,EAAKZ,EAAIa,OAAOD,qCACMf,gBAAgBiB,QAAQF,eAA9CG,WAEyC,IAAzBA,EAAcC,8BAClChB,EAAIU,MAAM,YAAa,gDAChBT,EAAIU,SAAS,sBAGtBV,EAAIG,OAAO,uBAAwB,CACjCa,MAAO,0BAxBHd,UAAAA,EAyBqB,uDAtBzBE,QAAAA,MAAI,6BAAJA,EAAAA,IAFkCL,EAAAU,MAApC,YAAA,gCA6BAT,EAAIU,SAAS,qGAKGX,EAAKC,wGA7BrBK,EAAAA,EAAAA,OAAQC,cAEKP,EAAAkB,KAAbjB,IAAAA,OAAIU,IAAAA,QA+BEQ,EAAe,CAAEC,OAAAA,EAAQC,QAAAA,qCACzBxB,gBAAgByB,OAAOV,EAAIO,WAEjCnB,EAAIU,MAAM,cAAe,yCACzBT,EAAIU,SAAS,gEAEbL,QAAQC,MAAM,+BAAdgB,EAAAd,IAjCJT,EAAAU,MAAA,YAAA,gCAmCIT,EAAIU,SAAJ,mBAAAa,OAAgCZ,2FAKhBZ,EAAKC,yGAEfW,EAAKZ,EAAIa,OAAOD,qCAChBf,gBAAgB4B,OAAOb,WAxCvBA,EAAAA,MA0CI,cA1CYA,oCA2CtBX,EAAIU,SAAS,8DAEbL,QAAQC,MAAM,+BAAdmB,EAAAjB,IACAT,EAAIU,MAAM,YAAa,8BA7CjBK,EAAAA,SAAAA,8EAmDZY,OAAOC,QAAU7B","file":"ReservasiController.min.js","sourcesContent":["// controllers/ReservasiController.js\r\nconst Model_Reservasi = require('../models/Model_Reservasi');\r\n\r\nclass ReservasiController {\r\n  // GET: daftar semua reservasi\r\n  static async index(req, res) {\r\n    try {\r\n      const reservasi = await Model_Reservasi.getAll();\r\n      res.render('admin/reservasi/index', {\r\n        title: 'Manajemen Reservasi',\r\n        data: reservasi,\r\n      });\r\n    } catch (err) {\r\n      console.error('[ReservasiController.index]', err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/admin/dashboard');\r\n    }\r\n  }\r\n\r\n  // GET: form edit\r\n  static async edit(req, res) {\r\n    try {\r\n      const id = req.params.id;\r\n      const reservasiData = await Model_Reservasi.getById(id);\r\n\r\n      if (!reservasiData || reservasiData.length === 0) {\r\n        req.flash('error_msg', 'Reservasi tidak ditemukan.');\r\n        return res.redirect('/reservasi');\r\n      }\r\n\r\n      res.render('admin/reservasi/edit', {\r\n        title: 'Update Status Reservasi',\r\n        reservasi: reservasiData[0],\r\n      });\r\n    } catch (err) {\r\n      console.error('[ReservasiController.edit]', err);\r\n      req.flash('error_msg', 'Gagal memuat data reservasi.');\r\n      res.redirect('/reservasi');\r\n    }\r\n  }\r\n\r\n  // POST: update status\r\n  static async update(req, res) {\r\n    const id = req.params.id;\r\n    try {\r\n      const { status, catatan } = req.body;\r\n      const dataToUpdate = { status, catatan };\r\n      await Model_Reservasi.Update(id, dataToUpdate);\r\n\r\n      req.flash('success_msg', 'Status reservasi berhasil diperbarui.');\r\n      res.redirect('/reservasi');\r\n    } catch (err) {\r\n      console.error('[ReservasiController.update]', err);\r\n      req.flash('error_msg', 'Gagal memperbarui reservasi.');\r\n      res.redirect(`/reservasi/edit/${id}`);\r\n    }\r\n  }\r\n\r\n  // GET: hapus reservasi\r\n  static async delete(req, res) {\r\n    try {\r\n      const id = req.params.id;\r\n      await Model_Reservasi.Delete(id);\r\n\r\n      req.flash('success_msg', 'Data reservasi berhasil dihapus.');\r\n      res.redirect('/reservasi');\r\n    } catch (err) {\r\n      console.error('[ReservasiController.delete]', err);\r\n      req.flash('error_msg', 'Gagal menghapus reservasi.');\r\n      res.redirect('/reservasi');\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = ReservasiController;\r\n"]}