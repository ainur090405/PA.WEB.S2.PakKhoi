{"version":3,"sources":["app_new.js"],"names":["createError","require","express","cookieParser","session","path","indexRouter","logger","authRouter","pemainRouter","flash","reservasiRouter","arenaRouter","bookingRouter","usersRouter","ulasanRouter","app","set","join","__dirname","adminRouter","use","json","urlencoded","extended","jadwalRouter","secret","resave","saveUninitialized","cookie","maxAge","res","next","req","user","secure","venuesRouter","fotoRouter","locals","error_msg","message","err","error","get","exports"],"mappings":"aAAA,IAAIA,YAAcC,QAAQ,eACtBC,QAAUD,QAAQ,WADlBD,KAAAA,QAAcC,QAGdE,aAAeF,QAAQ,iBAFvBC,OAAOD,QAAU,UAIjBG,QAAUH,QAAQ,mBAHlBI,MAAOJ,QAAQ,iBAOfK,YAAcL,QAAQ,kBALtBM,YAASN,QAAQ,kBAOjBO,WAAaP,QAAQ,iBANrBG,YAAUH,QAAQ,kBAQlBQ,aAAeR,QAAQ,mBAPvBS,aAAeT,QAAC,mBASdU,gBAAkBV,QAAQ,sBAC5BW,YAAcX,QAAQ,kBAPtBK,aAAcL,QAAQ,mBAStBY,cAAgBZ,QAAQ,oBARxBa,WAAWb,QAAU,iBAUrBc,aAAed,QAAQ,mBACvBe,IAAMd,UAGVc,IAAIC,IAAI,QAASZ,KAAKa,KAAKC,UAAW,UAZtCH,IAAII,IAAAA,cAAcnB,OAelBe,IAAIK,IAAId,OAAO,QAdfS,IAAIP,IAAAA,QAAYa,QAgBhBN,IAAIK,IAAInB,QAAQqB,WAAW,CAAEC,UAAU,KACvCR,IAAIK,IAAIlB,gBAhBRa,IAAIS,IAAAA,QAAAA,OAAexB,KAAQiB,KAAAC,UAAD,YAoB1BH,IAAIK,IAAIjB,QAAQ,CAlBhBsB,OAAId,sCAoBFe,QAAQ,EAnBVC,mBAAmB3B,EAqBjB4B,OAAQ,CApBNhB,QAAAA,EAsBAiB,OAAQ,UAnBZd,IAAIA,IAAGN,SAMPM,IAAIK,IAAId,SAAAA,EAAMwB,EAACC,GACfhB,EAAIK,OAAInB,YAAR+B,EAAAvB,MAAA,eACAM,EAAIK,OAAInB,UAAQqB,EAAWb,MAAA,aAAEc,EAAAA,OAAUU,KAAAD,EAAA7B,QAAA8B,MAAA,KAAvCF,MAKAhB,IAAIK,IAAIjB,IAAAA,aACNsB,IAAAA,IAAM,QAAElB,YAAuCQ,IAAAK,IAAA,SAAAD,aAC/CO,IAAAA,IAAM,UAFQlB,cAGdmB,IAAAA,IAAAA,SAAAA,aACAC,IAAAA,IAAM,SAAEjB,aACNuB,IAAAA,IAAAA,mBADMxB,iBACSK,IAAAK,IAAA,UAAAI,cACfK,IAAAA,IAAAA,UAAeM,cA0BnBpB,IAAIK,IAAI,WAAYR,eA5BVG,IAAAK,IAAA,QAAAgB,YAJMrB,IAkCZK,IAxBJ,UAAAN,cACAC,IAAIK,IAAIX,SAyBSuB,EAvBjBF,EAAAC,GACAA,EAAAhC,YAAA,QAGE+B,IAAAA,IAAIO,SAAOC,EAAXN,EAAuBA,EAAIvB,GA0B3BqB,EAAIO,OAAOE,QAAUC,EAAID,QAxBzBR,EAAIM,OAAAI,MAAA,gBAAAT,EAAAjB,IAAA2B,IAAA,OAAAF,EAAA,GAINzB,EAAIK,OAASf,EAAAA,QAAb,KACAU,EAAIK,OAAI,QAASb,CAAAA,MAAjB,YAGAQ,OAAA4B,QAAA5B","file":"app_new.min.js","sourcesContent":["var createError = require('http-errors');\r\nvar express = require('express');\r\nvar path = require('path');\r\nvar cookieParser = require('cookie-parser');\r\nvar logger = require('morgan');\r\nvar session = require('express-session');\r\nvar flash = require('connect-flash');\r\n\r\n// Impor Rute\r\nvar indexRouter = require('./routes/index');\r\nvar usersRouter = require('./routes/users'); // Rute CRUD Master User\r\nvar authRouter = require('./routes/auth'); // Rute Login/Register\r\nvar adminRouter = require('./routes/admin'); // Rute Dashboard Admin\r\nvar pemainRouter = require('./routes/pemain'); // Rute Dashboard Pemain\r\nvar jadwalRouter = require('./routes/jadwal');\r\nconst reservasiRouter = require('./routes/reservasi');\r\nvar arenaRouter = require('./routes/arena');\r\nvar venuesRouter = require('./routes/venues');\r\nvar bookingRouter = require('./routes/booking');\r\nvar fotoRouter = require('./routes/foto');\r\nvar ulasanRouter = require('./routes/ulasan');\r\nvar app = express();\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'ejs');\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\n// Konfigurasi Session (Tanpa .env)\r\napp.use(session({\r\n  secret: 'kunci-rahasia-untuk-arenago-project', // Kunci rahasia\r\n  resave: false,\r\n  saveUninitialized: true,\r\n  cookie: {\r\n    secure: false, // Set 'true' jika pakai HTTPS\r\n    maxAge: 1000 * 60 * 60 * 24 // Cookie berlaku 1 hari\r\n  }\r\n}));\r\n\r\n// Konfigurasi Flash Message\r\napp.use(flash());\r\n\r\n// [Middleware Global PENTING]\r\n// Mengirim pesan flash & info user ke SEMUA file .ejs\r\napp.use((req, res, next) => {\r\n  res.locals.success_msg = req.flash('success_msg');\r\n  res.locals.error_msg = req.flash('error_msg');\r\n  res.locals.user = req.session.user || null; // Info user yang login\r\n  next();\r\n});\r\n\r\n// Pendaftaran Rute\r\napp.use('/', indexRouter);\r\napp.use('/auth', authRouter);\r\napp.use('/admin', adminRouter);\r\napp.use('/pemain', pemainRouter);\r\napp.use('/users', usersRouter); // Ini untuk CRUD Master User oleh Admin\r\napp.use('/arena', arenaRouter);\r\napp.use('/admin/reservasi', reservasiRouter);\r\napp.use('/jadwal', jadwalRouter);\r\napp.use('/venues', venuesRouter);\r\napp.use('/booking', bookingRouter);\r\napp.use('/foto', fotoRouter);\r\napp.use('/ulasan', ulasanRouter);\r\n// catch 404 and forward to error handler\r\napp.use(function(req, res, next) {\r\n  next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use(function(err, req, res, next) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message;\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.render('error', { title: 'Error' });\r\n});\r\n\r\nmodule.exports = app;\r\n"]}